
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.strangebee.com/thehive/setup/installation/step-by-step-guide/">
      
      <link rel="icon" href="../../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>Step-by-Step guide - TheHive 5 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    

<meta name="robots" content="index" />

<!-- Open graph  -->
<meta property="og:type" content="website" />
<meta property="og:title" content="TheHive 5 Documentation" />
<meta
  property="og:description"
  content="StrangeBee provides cutting edge incident response automation to hundreds of SOC, CERT & CSIRT teams."
/>
<meta property="og:site_name" content="StrangeBee Docs" />
<meta
  property="og:image"
  content="https://docs.strangebee.com/images/share/meta-open-graph.png"
/>
<meta property="og:url" content="https://docs.strangebee.com" />
<meta property="og:locale" content="en_US" />
<meta
  property="og:video"
  content="https://www.youtube.com/watch?v=fBzaVhABGMY"
/>

<!-- Twitter card  -->
<meta name="twitter:title" content="TheHive 5 Documentation" />
<meta
  name="twitter:description"
  content="StrangeBee provides cutting edge incident response automation to hundreds of SOC, CERT & CSIRT teams."
/>
<meta
  name="twitter:image"
  content="https://docs.strangebee.com/images/share/meta-twitter-card.png"
/>
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@StrangeBee" />
<meta name="twitter:creator" content="@StrangeBee" />

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "StrangeBee - Docs",
    "alternateName": "StrangeBee",
    "url": "https://docs.strangebee.com/",
    "logo": "https://docs.strangebee.com/assets/images/strangebee.svg",
    "sameAs": "https://twitter.com/StrangeBee"
  }
</script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org/",
    "@type": "WebSite",
    "name": "StrangeBee - Docs",
    "url": "https://docs.strangebee.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://docs.strangebee.com/thehive/setup/configuration/ssl/?h={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
</script>


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#step-by-step-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<!-- Add announcement here, including arbitrary HTML -->
<a href="https://twitter.com/StrangeBee" target="_blank">
  For updates follow <strong>@StrangeBee</strong> on
  <span class="twemoji twitter">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
  </span>
  <strong>Twitter</strong>
</a>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="TheHive 5 Documentation" class="md-header__button md-logo" aria-label="TheHive 5 Documentation" data-md-component="logo">
      
  <img src="../../../../assets/images/strangebee.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TheHive 5 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Step-by-Step guide
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        TheHive
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../api-docs/" target="_blank" class="md-tabs__link">
      API Docs
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="TheHive 5 Documentation" class="md-nav__button md-logo" aria-label="TheHive 5 Documentation" data-md-component="logo">
      
  <img src="../../../../assets/images/strangebee.svg" alt="logo">

    </a>
    TheHive 5 Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
            
          
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">TheHive</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="TheHive" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          TheHive
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../download/" class="md-nav__link">
        Download
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Step-by-Step guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Step-by-Step guide
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java-virtual-machine" class="md-nav__link">
     Java Virtual Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache-cassandra" class="md-nav__link">
      Apache Cassandra
  </a>
  
    <nav class="md-nav" aria-label="  Apache Cassandra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-service" class="md-nav__link">
    Start the service
  </a>
  
    <nav class="md-nav" aria-label="Start the service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-configuration" class="md-nav__link">
    Additional configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch" class="md-nav__link">
     Elasticsearch
  </a>
  
    <nav class="md-nav" aria-label=" Elasticsearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sart-the-service" class="md-nav__link">
    Sart the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-storage" class="md-nav__link">
     File storage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thehive" class="md-nav__link">
     TheHive
  </a>
  
    <nav class="md-nav" aria-label=" TheHive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_2" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret-key-configuration" class="md-nav__link">
    Secret key configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-index" class="md-nav__link">
    Database &amp; index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-storage_1" class="md-nav__link">
    File storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cortex-misp" class="md-nav__link">
    Cortex &amp; MISP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    Advanced configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-licenses" class="md-nav__link">
    Usage &amp; Licenses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activate-a-license" class="md-nav__link">
    Activate a license
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        Running with Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        Activate a license
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3-node-cluster/" class="md-nav__link">
        Use TheHive as a cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes/" class="md-nav__link">
        Deploy on Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-from-4.x/" class="md-nav__link">
        Upgrade from TheHive 4.x
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../migration/" class="md-nav__link">
        Migration from TheHive 3.x
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/database/" class="md-nav__link">
        Database & index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/file-storage/" class="md-nav__link">
        File storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/connectors/" class="md-nav__link">
        TheHive connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/akka/" class="md-nav__link">
        Akka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/logs/" class="md-nav__link">
        Logs Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/proxy/" class="md-nav__link">
        Proxy settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/secret/" class="md-nav__link">
        `secret.conf` file
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/ssl/" class="md-nav__link">
        SSL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operations" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/cassandra-cluster/" class="md-nav__link">
        Operations on a Cassandra Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/backup-restore/" class="md-nav__link">
        Backup and restore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/cassandra-security/" class="md-nav__link">
        Security in Apache Cassandra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/minio-cluster/" class="md-nav__link">
        Operations on a MINIO cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/https/" class="md-nav__link">
        Https
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/fail2ban/" class="md-nav__link">
        Fail2ban
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release Notes" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-5.0/" class="md-nav__link">
        Release Notes for TheHive 5.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../api-docs/" target="_blank" class="md-nav__link">
        API Docs
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java-virtual-machine" class="md-nav__link">
     Java Virtual Machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache-cassandra" class="md-nav__link">
      Apache Cassandra
  </a>
  
    <nav class="md-nav" aria-label="  Apache Cassandra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-service" class="md-nav__link">
    Start the service
  </a>
  
    <nav class="md-nav" aria-label="Start the service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-configuration" class="md-nav__link">
    Additional configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elasticsearch" class="md-nav__link">
     Elasticsearch
  </a>
  
    <nav class="md-nav" aria-label=" Elasticsearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sart-the-service" class="md-nav__link">
    Sart the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-storage" class="md-nav__link">
     File storage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thehive" class="md-nav__link">
     TheHive
  </a>
  
    <nav class="md-nav" aria-label=" TheHive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_2" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secret-key-configuration" class="md-nav__link">
    Secret key configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-index" class="md-nav__link">
    Database &amp; index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-storage_1" class="md-nav__link">
    File storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cortex-misp" class="md-nav__link">
    Cortex &amp; MISP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration" class="md-nav__link">
    Advanced configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-licenses" class="md-nav__link">
    Usage &amp; Licenses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activate-a-license" class="md-nav__link">
    Activate a license
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="step-by-step-guide">Step-by-Step guide<a class="headerlink" href="#step-by-step-guide" title="Permanent link">#</a></h1>
<p>This page is a step by step installation and configuration guide to get an instance of TheHive up and running. This guide is illustrated with examples for DEB and RPM packages based systems and for installation from binary packages.</p>
<div class="admonition warning">
<p class="admonition-title">This guide describes the installation of a new instance of TheHive <strong>only</strong></p>
</div>
<h2 id="java-virtual-machine"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1zm-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 53.2 242.84 0 242.84 0c21.5 84.5-75.6 110.1-110.7 162.6-23.9 35.9 11.7 74.4 60.2 118.2zm114.6-176.2c.1 0-175.2 43.8-91.5 140.2 24.7 28.4-6.5 54-6.5 54s62.7-32.4 33.9-72.9c-26.9-37.8-47.5-56.6 64.1-121.3zm-6.1 270.5a12.19 12.19 0 0 1-2 2.6c128.3-33.7 81.1-118.9 19.8-97.3a17.33 17.33 0 0 0-8.2 6.3 70.45 70.45 0 0 1 11-3c31-6.5 75.5 41.5-20.6 91.4zM348 437.4s14.5 11.9-15.9 21.2c-57.9 17.5-240.8 22.8-291.6.7-18.3-7.9 16-19 26.8-21.3 11.2-2.4 17.7-2 17.7-2-20.3-14.3-131.3 28.1-56.4 40.2C232.84 509.4 401 461.3 348 437.4zM124.44 396c-78.7 22 47.9 67.4 148.1 24.5a185.89 185.89 0 0 1-28.2-13.8c-44.7 8.5-65.4 9.1-106 4.5-33.5-3.8-13.9-15.2-13.9-15.2zm179.8 97.2c-78.7 14.8-175.8 13.1-233.3 3.6 0-.1 11.8 9.7 72.4 13.6 92.2 5.9 233.8-3.3 237.1-46.9 0 0-6.4 16.5-76.2 29.7zM260.64 353c-59.2 11.4-93.5 11.1-136.8 6.6-33.5-3.5-11.6-19.7-11.6-19.7-86.8 28.8 48.2 61.4 169.5 25.9a60.37 60.37 0 0 1-21.1-12.8z"/></svg></span> Java Virtual Machine<a class="headerlink" href="#java-virtual-machine" title="Permanent link">#</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">DEB</label><label for="__tabbed_1_2">RPM</label><label for="__tabbed_1_3">Other</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo apt install openjdk-11-jre-headless
<span class="nb">echo</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;</span> <span class="p">|</span> sudo tee -a /etc/environment 
<span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;</span>
sudo update-java-alternatives --jre-headless -s java-1.11.0-openjdk-amd64
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo yum install java-11-openjdk-headless.x86_64
<span class="nb">echo</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;/usr/lib/jvm/jre-11-openjdk&quot;</span> <span class="p">|</span>sudo tee -a /etc/environment
<span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;/usr/lib/jvm/jre-11-openjdk&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>The installation requires Java 11, so refer to your system documentation to install it.</p>
</div>
</div>
</div>
<h2 id="apache-cassandra"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M448 80v48c0 44.2-100.3 80-224 80S0 172.2 0 128V80C0 35.82 100.3 0 224 0s224 35.82 224 80zm-54.8 134.7c19.9-7.4 39.9-16.9 54.8-28.6V288c0 44.2-100.3 80-224 80S0 332.2 0 288V186.1c14.93 11.7 34.02 21.2 54.85 28.6C99.66 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zm-338.35 160C99.66 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c19.9-7.4 39.9-16.9 54.8-28.6V432c0 44.2-100.3 80-224 80S0 476.2 0 432v-85.9c14.93 11.7 34.02 21.2 54.85 28.6z"/></svg></span>  Apache Cassandra<a class="headerlink" href="#apache-cassandra" title="Permanent link">#</a></h2>
<p>Apache Cassandra is a scalable and high available database. TheHive supports the latest stable version <strong>4.0.x</strong> of Cassandra.</p>
<div class="admonition info">
<p class="admonition-title">Upgrading from Cassandra 3.x</p>
<p>If you are upgrading from Cassandra 3.x, please follow the <a href="../upgrade-from-4.x/">dedicated guide</a>. This part is relevant for fresh installation only.</p>
</div>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">#</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">DEB</label><label for="__tabbed_2_2">RPM</label><label for="__tabbed_2_3">Other</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>
<p>Add Apache repository references</p>
<div class="highlight"><pre><span></span><code>wget -qO -  https://downloads.apache.org/cassandra/KEYS <span class="p">|</span> sudo gpg --dearmor  -o /usr/share/keyrings/cassandra-archive.gpg
<span class="nb">echo</span> <span class="s2">&quot;deb [signed-by=/usr/share/keyrings/cassandra-archive.gpg] https://downloads.apache.org/cassandra/debian 40x main&quot;</span> <span class="p">|</span>  sudo tee -a /etc/apt/sources.list.d/cassandra.sources.list 
</code></pre></div>
</li>
<li>
<p>Install the package</p>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt install cassandra
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li>
<p>Add Cassandra repository keys</p>
<div class="highlight"><pre><span></span><code>rpm --import https://downloads.apache.org/cassandra/KEYS
</code></pre></div>
</li>
<li>
<p>Add the Apache repository for Cassandra to <code>/etc/yum.repos.d/cassandra.repo</code></p>
<div class="highlight"><span class="filename">/etc/yum.repos.d/cassandra.repo</span><pre><span></span><code><span class="o">[</span>cassandra<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>Apache Cassandra
<span class="nv">baseurl</span><span class="o">=</span>https://downloads.apache.org/cassandra/redhat/40x/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">1</span>
<span class="nv">repo_gpgcheck</span><span class="o">=</span><span class="m">1</span>
<span class="nv">gpgkey</span><span class="o">=</span>https://downloads.apache.org/cassandra/KEYS
</code></pre></div>
</li>
<li>
<p>Install the package</p>
<div class="highlight"><pre><span></span><code>sudo yum install cassandra
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<p>Download and untgz archive from http://cassandra.apache.org/download/ in the folder of your choice.</p>
</div>
</div>
</div>
<p>By default, data is stored in <code>/var/lib/cassandra</code>.</p>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">#</a></h3>
<p>Configure Cassandra by editing <code>/etc/cassandra/cassandra.yaml</code> file.</p>
<div class="highlight"><span class="filename">/etc/cassandra/cassandra.yaml</span><pre><span></span><code><span class="c1"># content from /etc/cassandra/cassandra.yaml</span><span class="w"></span>
<span class="p p-Indicator">[</span><span class="nv">..</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;thp&#39;</span><span class="w"></span>
<span class="nt">listen_address</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;xx.xx.xx.xx&#39;</span><span class="w"> </span><span class="c1"># address for nodes</span><span class="w"></span>
<span class="nt">rpc_address</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;xx.xx.xx.xx&#39;</span><span class="w"> </span><span class="c1"># address for clients</span><span class="w"></span>
<span class="nt">seed_provider</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">org.apache.cassandra.locator.SimpleSeedProvider</span><span class="w"></span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="c1"># Ex: &quot;&lt;ip1&gt;,&lt;ip2&gt;,&lt;ip3&gt;&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">seeds</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;xx.xx.xx.xx&#39;</span><span class="w"> </span><span class="c1"># self for the first node</span><span class="w"></span>
<span class="nt">data_file_directories</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;/var/lib/cassandra/data&#39;</span><span class="w"></span>
<span class="nt">commitlog_directory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/lib/cassandra/commitlog&#39;</span><span class="w"></span>
<span class="nt">saved_caches_directory</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/lib/cassandra/saved_caches&#39;</span><span class="w"></span>
<span class="nt">hints_directory</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;/var/lib/cassandra/hints&#39;</span><span class="w"></span>
<span class="p p-Indicator">[</span><span class="nv">..</span><span class="p p-Indicator">]</span><span class="w"></span>
</code></pre></div>
<h3 id="start-the-service">Start the service<a class="headerlink" href="#start-the-service" title="Permanent link">#</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">DEB</label><label for="__tabbed_3_2">RPM</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo systemctl start cassandra
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Remove existing data before starting</p>
<p>With the DEB packages, Cassandra service could start automatically before configuring it: 
Stop it, remove the data and restart once the configuration is updated: 
<div class="highlight"><pre><span></span><code>sudo systemctl stop cassandra
sudo rm -rf /var/lib/cassandra/*
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p>Run the service and ensure it restart after a reboot:</p>
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload
sudo service cassandra start
sudo systemctl <span class="nb">enable</span> cassandra
</code></pre></div>
</div>
</div>
</div>
<p>By default Cassandra listens on <code>7000/tcp</code> (inter-node), <code>9042/tcp</code> (client).</p>
<h4 id="additional-configuration">Additional configuration<a class="headerlink" href="#additional-configuration" title="Permanent link">#</a></h4>
<div class="admonition tip">
<p class="admonition-title">Standalone server ONLY: disable tombstones</p>
<p>If you are installing a standalone server, tombstones can be disabled. </p>
<ol>
<li>
<p>Check <code>gc_grace_seconds</code> value</p>
<div class="highlight"><pre><span></span><code>cqlsh -u cassandra &lt;IP ADDRESS&gt; -e <span class="s2">&quot;SELECT table_name,gc_grace_seconds FROM system_schema.tables WHERE keyspace_name=&#39;thehive&#39;&quot;</span>
</code></pre></div>
<p>Results should look like this: </p>
<div class="highlight"><pre><span></span><code>            table_name       | gc_grace_seconds
    -------------------------+------------------
                edgestore    |           864000
            edgestore_lock_  |           864000
                graphindex   |           864000
            graphindex_lock_ |           864000
            janusgraph_ids   |           864000
        system_properties    |           864000
    system_properties_lock_  |           864000
                systemlog    |           864000
                    txlog    |           864000
</code></pre></div>
</li>
<li>
<p>Disable by setting <code>gc_grace_seconds</code> to 0. Use this command line: </p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> TABLE <span class="k">in</span> edgestore edgestore_lock_ graphindex graphindex_lock_ janusgraph_ids system_properties system_properties_lock_ systemlog txlog
    <span class="k">do</span>
    cqlsh -u cassandra -e <span class="s2">&quot;ALTER TABLE thehive.</span><span class="si">${</span><span class="nv">TABLE</span><span class="si">}</span><span class="s2"> WITH gc_grace_seconds = 0;&quot;</span>
    <span class="k">done</span>
</code></pre></div>
</li>
<li>
<p>Check changes has been taken into account, by running this command again: </p>
<div class="highlight"><pre><span></span><code>cqlsh -u cassandra &lt;IP ADDRESS&gt; -e <span class="s2">&quot;SELECT table_name,gc_grace_seconds FROM system_schema.tables WHERE keyspace_name=&#39;thehive&#39;&quot;</span>
</code></pre></div>
<p>Results should look like this: </p>
<div class="highlight"><pre><span></span><code>            table_name       | gc_grace_seconds
    -------------------------+------------------
                edgestore    |           0
            edgestore_lock_  |           0
                graphindex   |           0
            graphindex_lock_ |           0
            janusgraph_ids   |           0
        system_properties    |           0
    system_properties_lock_  |           0
                systemlog    |           0
                    txlog    |           0
</code></pre></div>
</li>
</ol>
</div>
<p>For additional configuration options, refer to:</p>
<ul>
<li><a href="https://cassandra.apache.org/doc/latest/getting_started/configuring.html">Cassandra documentation page</a></li>
<li><a href="https://docs.datastax.com/en/ddac/doc/datastax_enterprise/config/configTOC.html">Datastax documentation page</a></li>
</ul>
<h2 id="elasticsearch"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M88 48c13.3 0 24 10.75 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24V72c0-13.25 10.75-24 24-24h48zm392 16c17.7 0 32 14.33 32 32 0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32 0-17.67 14.3-32 32-32h288zm0 160c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32s14.3-32 32-32h288zm0 160c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32s14.3-32 32-32h288zM16 232c0-13.3 10.75-24 24-24h48c13.3 0 24 10.7 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24v-48zm72 136c13.3 0 24 10.7 24 24v48c0 13.3-10.7 24-24 24H40c-13.25 0-24-10.7-24-24v-48c0-13.3 10.75-24 24-24h48z"/></svg></span> Elasticsearch<a class="headerlink" href="#elasticsearch" title="Permanent link">#</a></h2>
<p>TheHive requires Elasticsearch to manage data indices. </p>
<div class="admonition info">
<p class="admonition-title">Elasticsearch 7.x only is supported</p>
</div>
<h3 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">#</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">DEB</label><label for="__tabbed_4_2">RPM</label><label for="__tabbed_4_3">Other</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>
<p>Add Elasticsearch repository keys</p>
<div class="highlight"><pre><span></span><code>wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch <span class="p">|</span>  sudo gpg --dearmor -o /usr/share/keyrings/elasticsearch-keyring.gpg
sudo apt-get install apt-transport-https
</code></pre></div>
</li>
<li>
<p>Add the DEB repository of Elasticsearch </p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot;deb [signed-by=/usr/share/keyrings/elasticsearch-keyring.gpg] https://artifacts.elastic.co/packages/7.x/apt stable main&quot;</span> <span class="p">|</span>  sudo tee /etc/apt/sources.list.d/elastic-7.x.list 
</code></pre></div>
</li>
<li>
<p>Install the package</p>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt install elasticsearch
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li>
<p>Add Elasticsearch repository references</p>
<div class="highlight"><pre><span></span><code>rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch
</code></pre></div>
</li>
<li>
<p>Add the RPM repository of Elasticsearch to <code>/etc/yum.repos.d/elasticsearch.repo</code></p>
<div class="highlight"><span class="filename">/etc/yum.repos.d/elasticsearch.repo</span><pre><span></span><code><span class="o">[</span>elasticsearch<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>Elasticsearch repository <span class="k">for</span> <span class="m">7</span>.x packages
<span class="nv">baseurl</span><span class="o">=</span>https://artifacts.elastic.co/packages/7.x/yum
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">1</span>
<span class="nv">gpgkey</span><span class="o">=</span>https://artifacts.elastic.co/GPG-KEY-elasticsearch
<span class="nv">enabled</span><span class="o">=</span><span class="m">0</span>
<span class="nv">autorefresh</span><span class="o">=</span><span class="m">1</span>
<span class="nv">type</span><span class="o">=</span>rpm-md
</code></pre></div>
</li>
<li>
<p>Install the package</p>
<div class="highlight"><pre><span></span><code>sudo yum install --enablerepo<span class="o">=</span>elasticsearch elasticsearch
</code></pre></div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">References</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html </a></li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p>Download and untgz archive from http://cassandra.apache.org/download/ in the folder of your choice.</p>
</div>
</div>
</div>
<h3 id="configuration_1">Configuration<a class="headerlink" href="#configuration_1" title="Permanent link">#</a></h3>
<ul>
<li><code>/etc/elasticsearch/elasticsearch.yml</code></li>
</ul>
<p>Elasticsearch configuration should contain the following lines: </p>
<div class="highlight"><span class="filename">/etc/elasticsearch/elasticsearch.yml</span><pre><span></span><code><span class="nt">http.host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="nt">transport.host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span><span class="w"></span>
<span class="nt">cluster.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hive</span><span class="w"></span>
<span class="nt">thread_pool.search.queue_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span><span class="w"></span>
<span class="nt">path.logs</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/log/elasticsearch&quot;</span><span class="w"></span>
<span class="nt">path.data</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/var/lib/elasticsearch&quot;</span><span class="w"></span>
<span class="nt">xpack.security.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">script.allowed_types</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;inline,stored&quot;</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Indexes will be created at the first start of TheHive. It can take few time</li>
<li>Like data and files, indexes should be part of the backup policy</li>
<li>Indexes can removed and created again</li>
</ul>
</div>
<ul>
<li>Custom JVM options
add the file <code>/etc/elasticsearch/jvm.options.d/jvm.options</code> with following lines:</li>
</ul>
<div class="highlight"><pre><span></span><code>-Dlog4j2.formatMsgNoLookups=true
-Xms4g
-Xmx4g
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">This can be updated according the amount of memory available</p>
</div>
<h3 id="sart-the-service">Sart the service<a class="headerlink" href="#sart-the-service" title="Permanent link">#</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">DEB</label><label for="__tabbed_5_2">RPM</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo systemctl start elasticsearch
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Remove existing data before starting</p>
<p>With the DEB packages, Elastic service could start automatically before configuring it: 
Stop it, remove the data and restart once the configuration is updated: 
<div class="highlight"><pre><span></span><code>sudo systemctl stop elasticsearch
sudo rm -rf /var/lib/elasticsearch/*
</code></pre></div></p>
</div>
</div>
<div class="tabbed-block">
<p>Run the service and ensure it restart after a reboot:</p>
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload
sudo service elasticsearch start
sudo systemctl <span class="nb">enable</span> elasticsearch
</code></pre></div>
</div>
</div>
</div>
<h2 id="file-storage"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M544 32H432L400 0h-80c-17.62 0-32 14.38-32 32v160c0 17.62 14.38 32 32 32h224c17.62 0 32-14.38 32-32V64c0-17.62-14.4-32-32-32zm0 288H432l-32-32h-80c-17.62 0-32 14.38-32 32v160c0 17.62 14.38 32 32 32h224c17.62 0 32-14.38 32-32V352c0-17.6-14.4-32-32-32zM64 16c0-8.875-7.12-16-16-16H16C7.125 0 0 7.125 0 16v400c0 17.62 14.38 32 32 32h224v-64H64V160h192V96H64V16z"/></svg></span> File storage<a class="headerlink" href="#file-storage" title="Permanent link">#</a></h2>
<p>For standalone production and test servers, we recommends using local filesystem. If you think about building a cluster with TheHive, you have several possible solutions: using NFS or S3 services; see the <a href="../3-node-cluster/">related guide</a> for more details and an example with MinIO servers.  </p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Local Filesystem</label><label for="__tabbed_6_2">S3 with Min.io</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>To store files on the local filesystem, start by choosing the dedicated folder (by default <code>/opt/thp/thehive/files</code>):</p>
<div class="highlight"><pre><span></span><code>sudo mkdir -p /opt/thp/thehive/files
</code></pre></div>
<p>This path will be used in the configuration of TheHive.</p>
<p>Later, after having installed TheHive, ensure the user <code>thehive</code> owns the path chosen for storing files:</p>
<div class="highlight"><pre><span></span><code>chown -R thehive:thehive /opt/thp/thehive/files
</code></pre></div>
</div>
<div class="tabbed-block">
<p>An example of installing, configuring and use Min.IO is detailed in <a href="../3-node-cluster/">this documentation</a>.</p>
</div>
</div>
</div>
<h2 id="thehive"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23 14.5c0-1.56-1.03-2.87-2.45-3.32.28-.5.45-1.07.45-1.68 0-1.56-1.03-2.87-2.45-3.32.28-.5.45-1.07.45-1.68C19 2.57 17.43 1 15.5 1h-7C6.57 1 5 2.57 5 4.5c0 .61.17 1.18.45 1.68C4.04 6.63 3 7.94 3 9.5c0 .61.17 1.18.45 1.68C2.04 11.63 1 12.94 1 14.5c0 1.26.67 2.34 1.67 2.96-.42.57-.67 1.28-.67 2.04C2 21.43 3.57 23 5.5 23h13c1.93 0 3.5-1.57 3.5-3.5 0-.76-.25-1.47-.67-2.04 1-.62 1.67-1.7 1.67-2.96M8.5 3h7c.83 0 1.5.67 1.5 1.5S16.33 6 15.5 6h-7C7.67 6 7 5.33 7 4.5S7.67 3 8.5 3m-2 5h11c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-11C5.67 11 5 10.33 5 9.5S5.67 8 6.5 8M4 19.5c0-.83.67-1.5 1.5-1.5H9v3H5.5c-.83 0-1.5-.67-1.5-1.5M18.5 21H15v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5m1-5h-4.68c-.42-1.16-1.52-2-2.82-2s-2.4.84-2.82 2H4.5c-.83 0-1.5-.67-1.5-1.5S3.67 13 4.5 13h15c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5Z"/></svg></span> TheHive<a class="headerlink" href="#thehive" title="Permanent link">#</a></h2>
<p>This part contains instructions to install TheHive and then configure it.</p>
<h3 id="installation_2">Installation<a class="headerlink" href="#installation_2" title="Permanent link">#</a></h3>
<p>All packages are published on our packages repository. We support Debian and RPM packages as well as binary packages (zip archive). All packages are signed using our GPG key <a href="https://raw.githubusercontent.com/TheHive-Project/TheHive/master/PGP-PUBLIC-KEY">562CBC1C</a>. Its fingerprint is <code>0CD5 AC59 DE5C 5A8E 0EE1  3849 3D99 BB18 562C BC1C</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">DEB</label><label for="__tabbed_7_2">RPM</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>wget -O- https://archives.strangebee.com/keys/strangebee.gpg <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/strangebee-archive-keyring.gpg
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo rpm --import https://archives.strangebee.com/keys/strangebee.gpg 
</code></pre></div>
</div>
</div>
</div>
<p>Install TheHive package by using the following commands:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:3"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">DEB</label><label for="__tabbed_8_2">RPM</label><label for="__tabbed_8_3">Other</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s1">&#39;deb [signed-by=/usr/share/keyrings/strangebee-archive-keyring.gpg] https://deb.strangebee.com thehive-5.x main&#39;</span> <span class="p">|</span> sudo tee -a /etc/apt/sources.list.d/strangebee.list
sudo apt-get update
sudo apt-get install -y thehive
</code></pre></div>
</div>
<div class="tabbed-block">
<ol>
<li>
<p>Setup your system to connect the RPM repository. Create and edit the file <code>/etc/yum.repos.d/strangebee.repo</code>:</p>
<div class="highlight"><span class="filename">/etc/yum.repos.d/strangebee.repo</span><pre><span></span><code><span class="o">[</span>thehive<span class="o">]</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
<span class="nv">priority</span><span class="o">=</span><span class="m">1</span>
<span class="nv">name</span><span class="o">=</span>StrangeBee RPM repository
<span class="nv">baseurl</span><span class="o">=</span>https://rpm.strangebee.com/thehive-5.x/noarch
<span class="nv">gpgkey</span><span class="o">=</span>https://archives.strangebee.com/keys/strangebee.gpg
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
</li>
<li>
<p>Then install the package using <code>yum</code>:</p>
<div class="highlight"><pre><span></span><code>sudo yum install thehive
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li>
<p>Download and unzip the chosen binary package. TheHive files can be installed wherever you want on the filesystem. In this guide, we assume you have chosen to install them under <code>/opt</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> /opt
wget https://archives.strangebee.com/zip/thehive-latest.zip
unzip thehive-latest.zip
sudo ln -s thehive-x.x.x thehive
</code></pre></div>
</li>
<li>
<p>Prepare the system. It is recommended to use a dedicated, non-privileged user account to start TheHive. If so, make sure that the chosen account can create log files in <code>/opt/thehive/logs</code>.</p>
<div class="highlight"><pre><span></span><code>sudo addgroup thehive
sudo adduser --system thehive
sudo chown -R thehive:thehive /opt/thehive
sudo mkdir /etc/thehive
sudo touch /etc/thehive/application.conf
sudo chown root:thehive /etc/thehive
sudo chgrp thehive /etc/thehive/application.conf
sudo chmod <span class="m">640</span> /etc/thehive/application.conf
</code></pre></div>
</li>
<li>
<p>Copy the systemd script in <code>/etc/systemd/system/thehive.service</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> /tmp
wget https://github.com/TheHive-Project/TheHive/blob/master/package/thehive.service
sudo cp thehive.service /etc/systemd/system/thehive.service
</code></pre></div>
</li>
</ol>
</div>
</div>
</div>
<h3 id="configuration_2">Configuration<a class="headerlink" href="#configuration_2" title="Permanent link">#</a></h3>
<p>The configuration that comes with binary packages is ready for a standalone installation, everything on the same server. </p>
<p>In this context, and at this stage, you might need to set the following parameters accordingly:</p>
<div class="highlight"><span class="filename">/etc/thehive/application.conf</span><pre><span></span><code><span class="p p-Indicator">[</span><span class="nv">..</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="c1"># Service configuration</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">application.baseUrl = &quot;http://localhost:9000&quot;</span><span class="w"> </span><span class="c1"># (1)</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">play.http.context = &quot;/&quot;</span><span class="w">                       </span><span class="c1"># (2)</span><span class="w"></span>
<span class="p p-Indicator">[</span><span class="nv">..</span><span class="p p-Indicator">]</span><span class="w"></span>
</code></pre></div>
<ol>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M128 96h384v256h64V80c0-26.38-21.62-48-48-48H112c-26.38 0-48 21.62-48 48v272h64V96zm496 287.1H16c-8.75 0-16 7.25-16 16v16c0 35.25 28.75 64 64 64h512c35.25 0 64-28.75 64-64v-16c0-7.9-7.2-16-16-16z"/></svg></span> specify the scheme, hostname and port used to join the application</li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m274.69 274.69-37.38-37.38L166 346ZM256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8Zm155.85 174.79 14.78-6.13a8 8 0 0 1 10.45 4.34 8 8 0 0 1-4.33 10.46L418 197.57a8 8 0 0 1-10.45-4.33 8 8 0 0 1 4.3-10.45ZM314.43 94l6.12-14.78a8 8 0 0 1 10.45-4.3 8 8 0 0 1 4.33 10.45l-6.13 14.78a8 8 0 0 1-10.45 4.33A8 8 0 0 1 314.43 94ZM256 60a8 8 0 0 1 8 8v16a8 8 0 0 1-8 8 8 8 0 0 1-8-8V68a8 8 0 0 1 8-8Zm-75 14.92a8 8 0 0 1 10.46 4.33L197.57 94a8 8 0 1 1-14.78 6.12l-6.13-14.78A8 8 0 0 1 181 74.92Zm-63.58 42.49a8 8 0 0 1 11.31 0L140 128.72a8 8 0 0 1 0 11.28 8 8 0 0 1-11.31 0l-11.31-11.31a8 8 0 0 1 .03-11.28ZM60 256a8 8 0 0 1 8-8h16a8 8 0 0 1 8 8 8 8 0 0 1-8 8H68a8 8 0 0 1-8-8Zm40.15 73.21-14.78 6.13A8 8 0 0 1 74.92 331a8 8 0 0 1 4.33-10.46L94 314.43a8 8 0 0 1 10.45 4.33 8 8 0 0 1-4.3 10.45Zm4.33-136A8 8 0 0 1 94 197.57l-14.78-6.12a8 8 0 0 1-4.3-10.45 8 8 0 0 1 10.45-4.33l14.78 6.13a8 8 0 0 1 4.33 10.44ZM197.57 418l-6.12 14.78a8 8 0 0 1-14.79-6.12l6.13-14.78a8 8 0 1 1 14.78 6.12ZM264 444a8 8 0 0 1-8 8 8 8 0 0 1-8-8v-16a8 8 0 0 1 8-8 8 8 0 0 1 8 8Zm67-6.92a8 8 0 0 1-10.46-4.33L314.43 418a8 8 0 0 1 4.33-10.45 8 8 0 0 1 10.45 4.33l6.13 14.78a8 8 0 0 1-4.34 10.42Zm63.58-42.49a8 8 0 0 1-11.31 0L372 383.28a8 8 0 0 1 0-11.28 8 8 0 0 1 11.31 0l11.31 11.31a8 8 0 0 1-.03 11.28ZM286.25 286.25 110.34 401.66l115.41-175.91 175.91-115.41ZM437.08 331a8 8 0 0 1-10.45 4.33l-14.78-6.13a8 8 0 0 1-4.33-10.45 8 8 0 0 1 10.48-4.32l14.78 6.12a8 8 0 0 1 4.3 10.45Zm6.92-67h-16a8 8 0 0 1-8-8 8 8 0 0 1 8-8h16a8 8 0 0 1 8 8 8 8 0 0 1-8 8Z"/></svg></span> specify if you use a custom path (<code>/</code> by default)</li>
</ol>
<p>Following configurations are required to start TheHive successfully:</p>
<ul>
<li>Secret key configuration</li>
<li>Database configuration</li>
<li>File storage configuration</li>
</ul>
<h4 id="secret-key-configuration">Secret key configuration<a class="headerlink" href="#secret-key-configuration" title="Permanent link">#</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Debian</label><label for="__tabbed_9_2">RPM</label><label for="__tabbed_9_3">Other</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The secret key is automatically generated and stored in <code>/etc/thehive/secret.conf</code> by package installation script.</p>
</div>
<div class="tabbed-block">
<p>The secret key is automatically generated and stored in <code>/etc/thehive/secret.conf</code> by package installation script.</p>
</div>
<div class="tabbed-block">
<p>Setup a secret key in the <code>/etc/thehive/secret.conf</code> file by running the following command:</p>
<div class="highlight"><pre><span></span><code>cat &gt; /etc/thehive/secret.conf <span class="s">&lt;&lt; _EOF_</span>
<span class="s">play.http.secret.key=&quot;$(cat /dev/urandom | tr -dc &#39;a-zA-Z0-9&#39; | fold -w 64 | head -n 1)&quot;</span>
<span class="s">_EOF_</span>
</code></pre></div>
</div>
</div>
</div>
<h4 id="database-index">Database &amp; index<a class="headerlink" href="#database-index" title="Permanent link">#</a></h4>
<p>By default, TheHive is configured to connect to Cassandra and Elasticsearch databases installed locally.</p>
<div class="highlight"><span class="filename">/etc/thehive/application.conf</span><pre><span></span><code><span class="c1"># Database and index configuration</span><span class="w"></span>
<span class="c1"># By default, TheHive is configured to connect to local Cassandra 4.x and a</span><span class="w"></span>
<span class="c1"># local Elasticsearch services without authentication.</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">db.janusgraph {</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">storage {</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">backend = cql</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hostname = [&quot;127.0.0.1&quot;]</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain"># Cassandra authentication (if configured)</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain"># username = &quot;thehive&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain"># password = &quot;password&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">cql {</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">cluster-name = thp</span><span class="w"></span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">keyspace = thehive</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">index.search {</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">backend = elasticsearch</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hostname = [&quot;127.0.0.1&quot;]</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">index-name = thehive</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
</code></pre></div>
<h4 id="file-storage_1">File storage<a class="headerlink" href="#file-storage_1" title="Permanent link">#</a></h4>
<p>By default, TheHive is configured to store files locally in <code>/opt/thp/thehive/files</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Local filesystem</label><label for="__tabbed_10_2">S3</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>If you chose to store files on the local filesystem:</p>
<ol>
<li>
<p>Ensure thehive user has permissions on the destination folder</p>
<div class="highlight"><pre><span></span><code>chown -R thehive:thehive /opt/thp/thehive/files
</code></pre></div>
</li>
<li>
<p>Default values in the configuration file </p>
<div class="highlight"><span class="filename">/etc/thehive/application.conf</span><pre><span></span><code><span class="c1"># Attachment storage configuration</span><span class="w"></span>
<span class="c1"># By default, TheHive is configured to store files locally in the folder.</span><span class="w"></span>
<span class="c1"># The path can be updated and should belong to the user/group running thehive service. (by default: thehive:thehive)</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">storage {</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">provider = localfs</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">localfs.location = /opt/thp/thehive/files</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
</code></pre></div>
</li>
</ol>
</div>
<div class="tabbed-block">
<p>If you chose MinIO and a S3 object storage system to store files in a filesystem, add following lines to TheHive configuration file (<code>/etc/thehive/application.conf</code>)</p>
<div class="highlight"><span class="filename">/etc/thehive/application.conf</span><pre><span></span><code><span class="c1">## Storage configuration</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">storage {</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">s3 {</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">bucket = &quot;thehive&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">readTimeout = 1 minute</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">writeTimeout = 1 minute</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">chunkSize = 1 MB</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">endpoint = &quot;http://&lt;IP_ADDRESS&gt;:9100&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">accessKey = &quot;&lt;MINIO ACCESS KEY&gt;&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">secretKey = &quot;&lt;MINIO SECRET KEY&gt;&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">region = &quot;us-east-1&quot;</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">}</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">alpakka.s3.path-style-access = force</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h4 id="cortex-misp">Cortex &amp; MISP<a class="headerlink" href="#cortex-misp" title="Permanent link">#</a></h4>
<p>By default the configuration file coming with packages contains following lines, enabling Cortex and MISP modules. If you are not using one them, you can comment the related line and restart the service.</p>
<div class="highlight"><span class="filename">/etc/thehive/application.conf</span><pre><span></span><code><span class="c1"># Additional modules</span><span class="w"></span>
<span class="c1">#</span><span class="w"></span>
<span class="c1"># TheHive is strongly integrated with Cortex and MISP.</span><span class="w"></span>
<span class="c1"># Both modules are enabled by default. If not used, each one can be disabled by</span><span class="w"></span>
<span class="c1"># ommenting the configuration line.</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">scalligraph.modules += org.thp.thehive.connector.cortex.CortexModule</span><span class="w"></span>
<span class="l l-Scalar l-Scalar-Plain">scalligraph.modules += org.thp.thehive.connector.misp.MispModule</span><span class="w"></span>
</code></pre></div>
<h3 id="run">Run<a class="headerlink" href="#run" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo systemctl start thehive
sudo systemctl <span class="nb">enable</span> thehive
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Please consider the service may take a while at the first start</p>
</div>
<p>Once it has started, open your browser and connect to <code>http://YOUR_SERVER_ADDRESS:9000/</code>.</p>
<p>The default admin user is <code>admin@thehive.local</code> with password <code>secret</code>. It is recommended to change the default password.</p>
<h2 id="advanced-configuration">Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permanent link">#</a></h2>
<p>For additional configuration options, please refer to the <a href="../../#configuration-guides">Configuration Guides</a>.</p>
<h2 id="usage-licenses">Usage &amp; Licenses<a class="headerlink" href="#usage-licenses" title="Permanent link">#</a></h2>
<p>By default, TheHive comes with no license token and let everyone use the application with 2 users and 1 organisation: this is the community version.</p>
<p>To unlock advanced features, contact StrangeBee to get a license - <a href="https://wwww.strangebee.com">https://wwww.strangebee.com</a> / <a href="mailto:contact@strangebee.com">contact@strangebee.com</a></p>
<h2 id="activate-a-license">Activate a license<a class="headerlink" href="#activate-a-license" title="Permanent link">#</a></h2>
<p>Follow this guide: <a href="../license/">Activate a license</a>.</p>




              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../../download/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Download" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Download
            </div>
          </div>
        </a>
      
      
        
        <a href="../docker/" class="md-footer__link md-footer__link--next" aria-label="Next: Running with Docker" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Running with Docker
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2022 StrangeBee. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://www.linkedin.com/company/strangebee" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/StrangeBee" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UCUmojqcxiG_LUbe62pR2Igg" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.annotate", "navigation.instant", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>